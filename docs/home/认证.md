# 注册
#### 简要描述：

- 支持方式：手机号、邮箱


#### 请求接口:

- /api/home/v1/auth/sign-up

#### 请求方式：

- POST

#### 请求参数:

|参数名|是否必须|类型|说明|
|:----    |:---|:----- |-----   |
|type |是  |string |发送方式：email邮箱、phone手机号码 |
|phone |否  |string |手机号 当type为phone时必填 |
|email |否  |string |邮箱 当type为email时必填 |
|verification_code |是  |string | 验证码    |
|verification_key |是  |string | 验证码唯一标识    |
|password |是  |string | 密码    |

#### 返回示例:

**正确时返回:**

```
{
    "message": "成功",
    "code": 200,
    "data": {
        "user_info": { // 用户信息
            "id": 4, // 用户id
            "phone": "", // 手机号
            "email": "873344138@qq.com", // 邮箱
            "nickname": "", // 昵称
            "sex": 0, // 0无 1男2女
            "area": "", // 地区
            "birthday": "", // 生日
            "avatar": "", // 头像地址
            "status": 1,
            "create_time": "2019-12-07 14:37:46",
            "update_time": "2019-12-07 16:46:30"
        },
        "jwt": { // jwt登录信息
            "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIiLCJhdWQiOiIiLCJpYXQiOjE1NzU3MDgzOTAsIm5iZiI6MTU3NTcwODM5MCwiZXhwIjoxNTc2MzEzMTkwLCJyZWYiOjE1NzgzMDAzOTAsInNjb3BlcyI6ImFjY2Vzc190b2tlbiIsImRhdGEiOnsidWlkIjo0fX0.iV0yplvgOe7GXltmi8In9dlyy894VA2oJacCJsHq7UQ",
            "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIiLCJhdWQiOiIiLCJpYXQiOjE1NzU3MDgzOTAsIm5iZiI6MTU3NTcwODM5MCwiZXhwIjoxNTc4MzAwMzkwLCJyZWYiOjE1NzgzMDAzOTAsInNjb3BlcyI6InJlZnJlc2hfdG9rZW4iLCJkYXRhIjp7InVpZCI6NH19.jfaRm2adaUk1UWAAQhLIoe0eBpBww_55hkYTCTNhiTg",
            "token_type": "Bearer",
            "expires_in": 604800 // 过期时间
        }
    },
    "uuid": "log_995b9611-4b9d-8311-82ce-8be825a9bd7a"
}
```

# 登录
#### 简要描述：

- 自动识别
- 支持方式：手机号、邮箱


#### 请求接口:

- /api/home/v1/auth/login

#### 请求方式：

- POST

#### 请求参数:

|参数名|是否必须|类型|说明|
|:----    |:---|:----- |-----   |
|username |是  |string |登录用户名 |
|password |是  |string | 密码    |

#### 返回示例:

**正确时返回:**

```
{
    "message": "成功",
    "code": 200,
    "data": {
        "user_info": { // 用户信息
            "id": 4, // 用户id
            "phone": "", // 手机号
            "email": "873344138@qq.com", // 邮箱
            "nickname": "", // 昵称
            "sex": 0, // 0无 1男2女
            "area": "", // 地区
            "birthday": "", // 生日
            "avatar": "", // 头像地址
            "status": 1,
            "create_time": "2019-12-07 14:37:46",
            "update_time": "2019-12-07 16:46:30"
        },
        "jwt": { // jwt登录信息
            "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIiLCJhdWQiOiIiLCJpYXQiOjE1NzU3MDgzOTAsIm5iZiI6MTU3NTcwODM5MCwiZXhwIjoxNTc2MzEzMTkwLCJyZWYiOjE1NzgzMDAzOTAsInNjb3BlcyI6ImFjY2Vzc190b2tlbiIsImRhdGEiOnsidWlkIjo0fX0.iV0yplvgOe7GXltmi8In9dlyy894VA2oJacCJsHq7UQ",
            "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIiLCJhdWQiOiIiLCJpYXQiOjE1NzU3MDgzOTAsIm5iZiI6MTU3NTcwODM5MCwiZXhwIjoxNTc4MzAwMzkwLCJyZWYiOjE1NzgzMDAzOTAsInNjb3BlcyI6InJlZnJlc2hfdG9rZW4iLCJkYXRhIjp7InVpZCI6NH19.jfaRm2adaUk1UWAAQhLIoe0eBpBww_55hkYTCTNhiTg",
            "token_type": "Bearer",
            "expires_in": 604800 // 过期时间
        }
    },
    "uuid": "log_995b9611-4b9d-8311-82ce-8be825a9bd7a"
}
```

# 注销
#### 请求接口:

- /api/home/v1/auth/logout

#### 请求方式：

- GET

#### 返回示例:

**正确时返回:**

```
{
    "message": "注销成功",
    "code": 200,
    "data": [],
    "uuid": "log_56beb0fa-f376-4727-cbb5-4fce9953b10d"
}
```

# 密码重置
#### 简要描述：

- 先选择用什么重置，然后发送验证码，最后使用本接口
- 支持方式：手机号、邮箱


#### 请求接口:

- /api/home/v1/auth/rest-password

#### 请求方式：

- POST

#### 请求参数:

|参数名|是否必须|类型|说明|
|:----    |:---|:----- |-----   |
|type |是  |string |发送方式：email邮箱、phone手机号码 |
|phone |否  |string |手机号 当type为phone时必填 |
|email |否  |string |邮箱 当type为email时必填 |
|verification_code |是  |string | 验证码    |
|verification_key |是  |string | 验证码唯一标识    |
|password |是  |string | 密码    |

#### 返回示例:

**正确时返回:**

```
{
    "message": "成功",
    "code": 200,
    "data": {
        "user_info": { // 用户信息
            "id": 4, // 用户id
            "phone": "", // 手机号
            "email": "873344138@qq.com", // 邮箱
            "nickname": "", // 昵称
            "sex": 0, // 0无 1男2女
            "area": "", // 地区
            "birthday": "", // 生日
            "avatar": "", // 头像地址
            "status": 1,
            "create_time": "2019-12-07 14:37:46",
            "update_time": "2019-12-07 16:46:30"
        },
        "jwt": { // jwt登录信息
            "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIiLCJhdWQiOiIiLCJpYXQiOjE1NzU3MDgzOTAsIm5iZiI6MTU3NTcwODM5MCwiZXhwIjoxNTc2MzEzMTkwLCJyZWYiOjE1NzgzMDAzOTAsInNjb3BlcyI6ImFjY2Vzc190b2tlbiIsImRhdGEiOnsidWlkIjo0fX0.iV0yplvgOe7GXltmi8In9dlyy894VA2oJacCJsHq7UQ",
            "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIiLCJhdWQiOiIiLCJpYXQiOjE1NzU3MDgzOTAsIm5iZiI6MTU3NTcwODM5MCwiZXhwIjoxNTc4MzAwMzkwLCJyZWYiOjE1NzgzMDAzOTAsInNjb3BlcyI6InJlZnJlc2hfdG9rZW4iLCJkYXRhIjp7InVpZCI6NH19.jfaRm2adaUk1UWAAQhLIoe0eBpBww_55hkYTCTNhiTg",
            "token_type": "Bearer",
            "expires_in": 604800 // 过期时间
        }
    },
    "uuid": "log_995b9611-4b9d-8311-82ce-8be825a9bd7a"
}
```

# 刷新token
任何一个永久有效的 token 都是相当危险的，通过任意方式泄露了 token 之后，用户的相关信息都有可能被利用。所以为了安全考虑，任何一种令牌的机制，都会有过期时间，过期时间一般也不会太长。那么 token 过期以后，难道要用户重新登录吗？像 OAuth 2.0 有 refresh_token 可以用来刷新一个过期的 access_token，jwt-auth 同样也为我们提供了刷新的机制，只要在可刷新的时间范围内，即使 token 过期了，依然可以调用接口，换取一个新的 token。这对于 APP 长期保持用户登录状态是十分重要的。

记得使用refresh-token放到header里面当做登录信息

#### 请求接口:

- /api/home/v1/auth/refresh-token

#### 请求方式：

- POST

#### 返回示例:

**正确时返回:**

```
{
    "message": "成功",
    "code": 200,
    "data": {
        "user_info": { // 用户信息
            "id": 4, // 用户id
            "phone": "", // 手机号
            "email": "873344138@qq.com", // 邮箱
            "nickname": "", // 昵称
            "sex": 0, // 0无 1男2女
            "area": "", // 地区
            "birthday": "", // 生日
            "avatar": "", // 头像地址
            "status": 1,
            "create_time": "2019-12-07 14:37:46",
            "update_time": "2019-12-07 16:46:30"
        },
        "jwt": { // jwt登录信息
            "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIiLCJhdWQiOiIiLCJpYXQiOjE1NzU3MDgzOTAsIm5iZiI6MTU3NTcwODM5MCwiZXhwIjoxNTc2MzEzMTkwLCJyZWYiOjE1NzgzMDAzOTAsInNjb3BlcyI6ImFjY2Vzc190b2tlbiIsImRhdGEiOnsidWlkIjo0fX0.iV0yplvgOe7GXltmi8In9dlyy894VA2oJacCJsHq7UQ",
            "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIiLCJhdWQiOiIiLCJpYXQiOjE1NzU3MDgzOTAsIm5iZiI6MTU3NTcwODM5MCwiZXhwIjoxNTc4MzAwMzkwLCJyZWYiOjE1NzgzMDAzOTAsInNjb3BlcyI6InJlZnJlc2hfdG9rZW4iLCJkYXRhIjp7InVpZCI6NH19.jfaRm2adaUk1UWAAQhLIoe0eBpBww_55hkYTCTNhiTg",
            "token_type": "Bearer",
            "expires_in": 604800 // 过期时间
        }
    },
    "uuid": "log_995b9611-4b9d-8311-82ce-8be825a9bd7a"
}
```